# 指定した漢字にルビが振られていることを確認する prh の設定ファイルを生成する

## 必要条件

- python3

## 手順

1. `.txt` ファイル内のルビを振りたい漢字の後に、ルビを半角丸カッコで囲んで記載しておきます。

    例:

    ```txt
    文書(ぶんしょ)内のルビを振りたい漢字の後に、ルビを半角丸カッコで囲んで記載(きさい)しておきます。
    ```

2. 次のコマンドを実行すると、抽出元のファイルからルビの付いた漢字をルビごと抽出して「output_file_path」で指定したテキストファイルに保存できます。

    - 「input_file_path」に抽出元のファイルを、「output_file_path」に結果を保存するファイルをフルパスで指定します。
    - 抽出元のファイルは `.md` または `.txt` のみです。
    - 結果を保存するファイルは `.txt` のみです。

    ```shell
    python3 extract_kanji_with_kana.py input_file_path output_file_path
    ```

    出力ファイルの内容:

    ```txt
    文書(ぶんしょ)
    記載(きさい)
    ```

3. 次のコマンドを実行すると、2 で抽出したファイルから prh の設定ファイル（`.yml`）を生成できます。

    - 「input_file_path」に 2 で抽出したファイル名を、「output_file_path」に生成するファイル名をフルパスで指定します。
    - 抽出元のファイルは `.txt` のみです。
    - 出力ファイルは `.yml` のみです。

    ```shell
    python3 generate_prh.py input_file_path output_file_path
    ```

    出力ファイルの内容:

    ```yml
    version: 1
    rules:
     - expected: 文書(ぶんしょ)
       pattern: /文書(?!\(ぶんしょ\))/
       prh: 「文書」のルビ「ぶんしょ」が抜けています。
     - expected: 記載(きさい)
       pattern: /記載(?!\(きさい\))/
       prh: 「記載」のルビ「きさい」が抜けています。
    ```

4. 生成した `.yml` の内容を確認して適宜調整します。
5. この例ではルビを囲むのに半角丸カッコを使用していますが、コードを若干改造することで全角丸カッコや青空文庫スタイルのルビ（《》）にも対応できます。
